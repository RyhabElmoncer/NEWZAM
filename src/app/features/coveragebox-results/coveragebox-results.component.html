<div class="simple-coverage-container">

  <!-- État de chargement -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Analyse de la couverture...</p>
  </div>

  <!-- Contenu principal -->
  <div *ngIf="!isLoading && !hasError">

    <!-- En-tête -->


    <!-- Technologies -->
    <div class="tech-sections">
      <div *ngFor="let tech of coverageData; let i = index"
           class="tech-section"
           [class.collapsed]="collapsedSections[i]"
           [attr.data-tech]="tech.technology">

        <!-- En-tête technologie avec toggle -->
        <div class="tech-title" (click)="toggleSection(i)">
          <i [class]="tech.icon" class="tech-icon"></i>
          <h2>{{ tech.technology }}</h2>
          <span class="operator-count">{{ tech.operators.length }} opérateurs</span>
          <i class="fas fa-chevron-down toggle-icon"></i>
        </div>

        <!-- Contenu collapsible -->
        <div class="tech-content">
          <!-- Grille opérateurs compacte -->
          <div class="operators-compact-grid">
            <div *ngFor="let operator of tech.operators"
                 class="operator-compact-card"
                 [class.available]="operator.available"
                 [class.unavailable]="!operator.available">

              <!-- En-tête opérateur -->
              <div class="operator-header">
                <img [src]="operator.logo" [alt]="operator.name" class="logo">
                <div class="operator-info">
                  <span class="name">{{ operator.displayName }}</span>
                  <span class="status" [class.available]="operator.available">
                    <i class="fas"
                       [class.fa-check-circle]="operator.available"
                       [class.fa-times-circle]="!operator.available"></i>
                  </span>
                </div>
              </div>

              <!-- Données de performance -->
              <div class="performance-data" *ngIf="operator.available">
                <div class="data-row">
                  <span class="label">
                    <i class="fas fa-arrow-down"></i> Réception
                  </span>
                  <span class="value">{{ operator.reception }}</span>
                </div>
                <div class="data-row">
                  <span class="label">
                    <i class="fas fa-arrow-up"></i> Émission
                  </span>
                  <span class="value">{{ operator.emission }}</span>
                </div>
                <div class="data-row">
                  <span class="label">
                    <i class="fas fa-clock"></i> Latence
                  </span>
                  <span class="value">{{ operator.ping }}</span>
                </div>
              </div>

              <!-- Message non disponible -->
              <div class="unavailable-msg" *ngIf="!operator.available">
                <i class="fas fa-info-circle"></i>
                <span>Service non disponible</span>
              </div>

              <!-- Actions (3 boutons empilés) -->
              <div class="compact-actions">
                <button class="btn-small btn-primary"
                        (click)="viewOffers(operator.id)"
                        [disabled]="!operator.available">
                  <i class="fas fa-eye"></i>
                  <span>Voir offres</span>
                </button>
                <button class="btn-small btn-secondary"
                        (click)="goToStepper()"
                        [disabled]="!operator.available">
                  <i class="fas fa-calculator"></i>
                  <span>          Simuler  offres</span>
                </button>
                <button class="btn-small btn-outline"
                        (click)="requestCallBack(operator.id)"
                        [disabled]="!operator.available">
                  <i class="fas fa-phone"></i>
                  <span>Être rappelé</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions globales -->

  </div>

  <!-- État d'erreur -->
  <div *ngIf="hasError && !isLoading" class="error-state">
    <i class="fas fa-exclamation-triangle"></i>
    <h3>Erreur de chargement</h3>
    <p>Impossible de charger les données</p>
    <button class="btn-retry" (click)="loadEligibilityData()">
      <i class="fas fa-redo"></i>
      Réessayer
    </button>
  </div>

</div>
